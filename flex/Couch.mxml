<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
	layout="absolute"
  creationComplete="init()" xmlns:components="couch.components.*">
  <mx:Style source="/skin/yflexskin.css/"/>
  <mx:Script>
    <![CDATA[
    	//components
    	import couch.components.App;
    
    	//controllers
    	import couch.controllers.AppController;
      import couch.controllers.ModelsController;
      
      //ruboss
    	import org.ruboss.collections.RubossCollection;
      import org.ruboss.services.http.JSONHTTPServiceProvider;
      import org.ruboss.Ruboss;
      
      //shortcut functions
      public static function get models():ModelsController {
        return ModelsController.instance;
      }
      
      private function init():void {
      	//enable logging
      	Ruboss.enableLogging();
      	
      	//load json server provider
        AppController.initialize([JSONHTTPServiceProvider],JSONHTTPServiceProvider.ID);
        
        //setting the root path for development/production
        var myEnvironment:String = Application.application.parameters.environment;
        if (myEnvironment == 'production')
        	Ruboss.httpRootUrl = "/couchdb/";
        
        //load up app to call models controller
        var app:App = new App;
        container.addChild(app);
      }

    ]]>
  </mx:Script>
  <mx:Canvas id="container" styleName="appContainer"
  	x="0" y="0" width="100%" height="100%"/>
</mx:Application>